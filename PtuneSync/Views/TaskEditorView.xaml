<!-- File: Views/TaskEditorView.xaml -->
<UserControl
    x:Class="PtuneSync.Views.TaskEditorView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:PtuneSync.ViewModels"
    xmlns:models="using:PtuneSync.Models">

    <UserControl.DataContext>
        <vm:TaskEditorViewModel />
    </UserControl.DataContext>

    <Grid Padding="24">
        <StackPanel Spacing="16">

            <TextBlock Text="Task Editor" FontSize="20" FontWeight="SemiBold" />

            <ListView ItemsSource="{Binding Tasks}">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="models:TaskItem">
                        <Grid Margin="0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />      <!-- 左列：可変（TextBox） -->
                                <ColumnDefinition Width="50" />     <!-- 右列：固定（ボタン） -->
                            </Grid.ColumnDefinitions>

                            <!-- TextBox（インデントをここで適用） -->
                            <TextBox Grid.Column="0"
                                    Margin="{x:Bind Indent}"
                                    Text="{x:Bind Title, Mode=TwoWay}"
                                    HorizontalAlignment="Stretch"
                                    Height="38"/>

                            <!-- 親/子切り替えボタン（右端に固定配置） -->
                            <Button Grid.Column="1"
                                    Content="⇄"
                                    Width="40"
                                    HorizontalAlignment="Right"
                                    Click="OnToggleHierarchyClicked"/>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

        </StackPanel>
    </Grid>
</UserControl>
